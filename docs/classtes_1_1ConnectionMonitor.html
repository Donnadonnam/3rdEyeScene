<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>3rd Eye Scene: tes::ConnectionMonitor Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">3rd Eye Scene</div>
   <div id="projectbrief">3rd Eye Scene documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('classtes_1_1ConnectionMonitor.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">tes::ConnectionMonitor Class Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="tes::ConnectionMonitor" -->
<p>A utility class for monitoring new connections for a <code><a class="el" href="classtes_1_1Server.html" title="Defines the interface for managing a 3es server.">Server</a></code>.  
 <a href="classtes_1_1ConnectionMonitor.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="3esconnectionmonitor_8h_source.html">3esconnectionmonitor.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for tes::ConnectionMonitor:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classtes_1_1ConnectionMonitor.png" usemap="#tes::ConnectionMonitor_map" alt=""/>
  <map id="tes::ConnectionMonitor_map" name="tes::ConnectionMonitor_map">
<area href="classtes_1_1TcpConnectionMonitor.html" alt="tes::TcpConnectionMonitor" shape="rect" coords="0,56,162,80"/>
</map>
 </div></div>

<p><a href="classtes_1_1ConnectionMonitor-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><b>Mode</b> { <b>None</b>, 
<b>Synchronous</b>, 
<b>Asynchronous</b>
 }</td></tr>
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtes_1_1ConnectionMonitor.html#a114a20ff82fd77e7da537ea98f27d6d7">start</a> (Mode mode)=0</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts the monitor listening in the specified mode.  <a href="#a114a20ff82fd77e7da537ea98f27d6d7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtes_1_1ConnectionMonitor.html#a55c032ddcac6b1ce37fae665fabfee07">stop</a> ()=0</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops listening for further connections.  <a href="#a55c032ddcac6b1ce37fae665fabfee07"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtes_1_1ConnectionMonitor.html#ab5b417c725275985acc9b6933bd30992">join</a> ()=0</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Called to join the monitor thread.  <a href="#ab5b417c725275985acc9b6933bd30992"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtes_1_1ConnectionMonitor.html#af12188c156141e2509e3be3eed9402d2">isRunning</a> () const =0</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if the connection monitor has start.  <a href="#af12188c156141e2509e3be3eed9402d2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual Mode&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtes_1_1ConnectionMonitor.html#a56339ea45545a33bbc0e1289b3503519">mode</a> () const =0</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the current running mode.  <a href="#a56339ea45545a33bbc0e1289b3503519"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtes_1_1ConnectionMonitor.html#a6024a174700e90daa3ec24e324ae6c88">waitForConnection</a> (unsigned timeoutMs)=0</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait up to <code>timeoutMs</code> milliseconds for a connection.  <a href="#a6024a174700e90daa3ec24e324ae6c88"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtes_1_1ConnectionMonitor.html#a2ad615c2fd38e0f78ec72f0b1fc67da6">monitorConnections</a> ()=0</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Accepts new connections and checks for expired connections, but effects neither in the <code><a class="el" href="classtes_1_1Server.html" title="Defines the interface for managing a 3es server.">Server</a></code>.  <a href="#a2ad615c2fd38e0f78ec72f0b1fc67da6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtes_1_1ConnectionMonitor.html#a6f90cafd07d22f404d324cbf2ac37c9e">setConnectionCallback</a> (void(*callback)(<a class="el" href="classtes_1_1Server.html">Server</a> &amp;, <a class="el" href="classtes_1_1Connection.html">Connection</a> &amp;, void *), void *user)=0</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the callback invoked for each new connection.  <a href="#a6f90cafd07d22f404d324cbf2ac37c9e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtes_1_1ConnectionMonitor.html#ad59be7d4f38eb75e23ebb026793e1391">setConnectionCallback</a> (const std::function&lt; void(<a class="el" href="classtes_1_1Server.html">Server</a> &amp;, <a class="el" href="classtes_1_1Connection.html">Connection</a> &amp;)&gt; &amp;callback)=0</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">An overload of <code><a class="el" href="classtes_1_1ConnectionMonitor.html#a6f90cafd07d22f404d324cbf2ac37c9e" title="Sets the callback invoked for each new connection.">setConnectionCallback()</a></code> using the C++11 <code>funtion</code> object.  <a href="#ad59be7d4f38eb75e23ebb026793e1391"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtes_1_1ConnectionMonitor.html#aa2a02e77a49ece1d183830d17e8c0941">commitConnections</a> ()=0</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Migrates new connections to the owning <code><a class="el" href="classtes_1_1Server.html" title="Defines the interface for managing a 3es server.">Server</a></code> and removes expired connections.  <a href="#aa2a02e77a49ece1d183830d17e8c0941"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3aac9d9446d130c6409624dd431e1e98"></a><!-- doxytag: member="tes::ConnectionMonitor::~ConnectionMonitor" ref="a3aac9d9446d130c6409624dd431e1e98" args="()" -->
virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtes_1_1ConnectionMonitor.html#a3aac9d9446d130c6409624dd431e1e98">~ConnectionMonitor</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Protected virtual destructor. <br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>A utility class for monitoring new connections for a <code><a class="el" href="classtes_1_1Server.html" title="Defines the interface for managing a 3es server.">Server</a></code>. </p>
<p>The monitor manages listening for new connections and expiring old ones. Doing so can be time consuming, so the monitor supports running its own monitor thread. It also supports synchronous operation in case connection monitoring is unnecessary, or unable to be pushed off thread.</p>
<p>Asynchronous mode is activated by calling <code><a class="el" href="classtes_1_1ConnectionMonitor.html#a114a20ff82fd77e7da537ea98f27d6d7" title="Starts the monitor listening in the specified mode.">start()</a></code> and stopped with <code><a class="el" href="classtes_1_1ConnectionMonitor.html#a55c032ddcac6b1ce37fae665fabfee07" title="Stops listening for further connections.">stop()</a></code>. Calls to <code><a class="el" href="classtes_1_1ConnectionMonitor.html#ab5b417c725275985acc9b6933bd30992" title="Called to join the monitor thread.">join()</a></code> will block until the monitor thread has completed, but should only be called after <code><a class="el" href="classtes_1_1ConnectionMonitor.html#a55c032ddcac6b1ce37fae665fabfee07" title="Stops listening for further connections.">stop()</a></code> has been called. The <code><a class="el" href="classtes_1_1ConnectionMonitor.html#aa2a02e77a49ece1d183830d17e8c0941" title="Migrates new connections to the owning Server and removes expired connections.">commitConnections()</a></code> method must still be called by the main thread (synchronously) to control when connections are activated and deactivated.</p>
<p>Synchronous mode is supported by calling <code><a class="el" href="classtes_1_1ConnectionMonitor.html#a2ad615c2fd38e0f78ec72f0b1fc67da6" title="Accepts new connections and checks for expired connections, but effects neither in the Server...">monitorConnections()</a></code> to accept new connections. This must be followed by a call to <code><a class="el" href="classtes_1_1ConnectionMonitor.html#aa2a02e77a49ece1d183830d17e8c0941" title="Migrates new connections to the owning Server and removes expired connections.">commitConnections()</a></code> to commit the changes to the owning <code><a class="el" href="classtes_1_1Server.html" title="Defines the interface for managing a 3es server.">Server</a></code>.</p>
<dl class="user"><dt><b>Synchronous Usage</b></dt><dd><div class="fragment"><pre class="fragment"> <span class="keywordtype">float</span> dt = 0;
 Server *server = <a class="code" href="classtes_1_1Server.html#ab1ed5e91f6470eb930f07713d8d37012" title="Creates a server with the given settings.">Server::create</a>()
 server-&gt;connectionMonitor()-&gt;<a class="code" href="classtes_1_1ConnectionMonitor.html#a114a20ff82fd77e7da537ea98f27d6d7" title="Starts the monitor listening in the specified mode.">start</a>(tes::ConnectionMonitor::Synchronous);
 for (;;)
 {
   <span class="comment">// Prepare frame.</span>
   <span class="comment">//...</span>

   server-&gt;updateFrame(dt);
   server-&gt;connectionMonitor()-&gt;monitorConnections();
   server-&gt;connectionMonitor()-&gt;commitConnections();

   <span class="comment">// Loop end...</span>
 }
</pre></div></dd></dl>
<dl class="user"><dt><b>Asynchronous Usage</b></dt><dd><div class="fragment"><pre class="fragment"> <span class="keywordtype">float</span> dt = 0;
 Server *server = <a class="code" href="classtes_1_1Server.html#ab1ed5e91f6470eb930f07713d8d37012" title="Creates a server with the given settings.">Server::create</a>()
 server-&gt;connectionMonitor()-&gt;<a class="code" href="classtes_1_1ConnectionMonitor.html#a114a20ff82fd77e7da537ea98f27d6d7" title="Starts the monitor listening in the specified mode.">start</a>(tes::ConnectionMonitor::Asynchronous);
 for (;;)
 {
   <span class="comment">// Prepare frame.</span>
   <span class="comment">//...</span>

   server-&gt;updateFrame(dt);
   server-&gt;connectionMonitor()-&gt;commitConnections();

   <span class="comment">// Loop end...</span>
 }

 server-&gt;connectionMonitor()-&gt;stop();  <span class="comment">// Safe even if Synchronous</span>
 server-&gt;connectionMonitor()-&gt;join();  <span class="comment">// Safe even if Synchronous</span>
</pre></div> </dd></dl>
</div><hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="aa2a02e77a49ece1d183830d17e8c0941"></a><!-- doxytag: member="tes::ConnectionMonitor::commitConnections" ref="aa2a02e77a49ece1d183830d17e8c0941" args="()=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void tes::ConnectionMonitor::commitConnections </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Migrates new connections to the owning <code><a class="el" href="classtes_1_1Server.html" title="Defines the interface for managing a 3es server.">Server</a></code> and removes expired connections. </p>
<p>For each new connection, the callback set in <code><a class="el" href="classtes_1_1ConnectionMonitor.html#a6f90cafd07d22f404d324cbf2ac37c9e" title="Sets the callback invoked for each new connection.">setConnectionCallback()</a></code> is invoked, passing the server, connection and <code>user</code> argument.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">callback</td><td>When given, called for each new connection. </td></tr>
    <tr><td class="paramname">user</td><td>User argument passed to <code>callback</code>. </td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="classtes_1_1TcpConnectionMonitor.html#a0dbe24bfe1d7ecd704ba2c44b8425978">tes::TcpConnectionMonitor</a>.</p>

</div>
</div>
<a class="anchor" id="af12188c156141e2509e3be3eed9402d2"></a><!-- doxytag: member="tes::ConnectionMonitor::isRunning" ref="af12188c156141e2509e3be3eed9402d2" args="() const =0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool tes::ConnectionMonitor::isRunning </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns true if the connection monitor has start. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>True if running. </dd></dl>

<p>Implemented in <a class="el" href="classtes_1_1TcpConnectionMonitor.html#a73719760567e72c2147895b63e78a297">tes::TcpConnectionMonitor</a>.</p>

</div>
</div>
<a class="anchor" id="ab5b417c725275985acc9b6933bd30992"></a><!-- doxytag: member="tes::ConnectionMonitor::join" ref="ab5b417c725275985acc9b6933bd30992" args="()=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void tes::ConnectionMonitor::join </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Called to join the monitor thread. </p>
<p>Returns immediately if not running. </p>

<p>Implemented in <a class="el" href="classtes_1_1TcpConnectionMonitor.html#af11fbe0e1883d1db71cee38500a47d91">tes::TcpConnectionMonitor</a>.</p>

</div>
</div>
<a class="anchor" id="a56339ea45545a33bbc0e1289b3503519"></a><!-- doxytag: member="tes::ConnectionMonitor::mode" ref="a56339ea45545a33bbc0e1289b3503519" args="() const =0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual Mode tes::ConnectionMonitor::mode </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the current running mode. </p>
<p><code>Asynchronous</code> mode is set as soon as <code>start(Asynchronous)</code> is called and drops to <code>None</code> after calling <code><a class="el" href="classtes_1_1ConnectionMonitor.html#a55c032ddcac6b1ce37fae665fabfee07" title="Stops listening for further connections.">stop()</a></code> once the thread has stopped.</p>
<p><code>Synchronous</code> mode is set as soon as <code>start(Synchronous)</code> is called and drops to <code>None</code> on calling <code><a class="el" href="classtes_1_1ConnectionMonitor.html#a55c032ddcac6b1ce37fae665fabfee07" title="Stops listening for further connections.">stop()</a></code>.</p>
<p>The mode is <code>None</code> if not running in either mode. </p>

<p>Implemented in <a class="el" href="classtes_1_1TcpConnectionMonitor.html#a4eedf974e8c781932d76d2754cb5ac29">tes::TcpConnectionMonitor</a>.</p>

</div>
</div>
<a class="anchor" id="a2ad615c2fd38e0f78ec72f0b1fc67da6"></a><!-- doxytag: member="tes::ConnectionMonitor::monitorConnections" ref="a2ad615c2fd38e0f78ec72f0b1fc67da6" args="()=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void tes::ConnectionMonitor::monitorConnections </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Accepts new connections and checks for expired connections, but effects neither in the <code><a class="el" href="classtes_1_1Server.html" title="Defines the interface for managing a 3es server.">Server</a></code>. </p>
<p>This is either called on the main thread for synchronous operation, or internally in asynchronous mode. </p>

<p>Implemented in <a class="el" href="classtes_1_1TcpConnectionMonitor.html#a62c319e394d5892d746012b120961be9">tes::TcpConnectionMonitor</a>.</p>

</div>
</div>
<a class="anchor" id="a6f90cafd07d22f404d324cbf2ac37c9e"></a><!-- doxytag: member="tes::ConnectionMonitor::setConnectionCallback" ref="a6f90cafd07d22f404d324cbf2ac37c9e" args="(void(*callback)(Server &amp;, Connection &amp;, void *), void *user)=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void tes::ConnectionMonitor::setConnectionCallback </td>
          <td>(</td>
          <td class="paramtype">void(*)(<a class="el" href="classtes_1_1Server.html">Server</a> &amp;, <a class="el" href="classtes_1_1Connection.html">Connection</a> &amp;, void *)&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>user</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets the callback invoked for each new connection. </p>
<p>This is invoked from <code><a class="el" href="classtes_1_1ConnectionMonitor.html#aa2a02e77a49ece1d183830d17e8c0941" title="Migrates new connections to the owning Server and removes expired connections.">commitConnections()</a></code> for each new connection. The arguments passed to the callback are:</p>
<ul>
<li><code>server</code> : the <code><a class="el" href="classtes_1_1Server.html" title="Defines the interface for managing a 3es server.">Server</a></code> object.</li>
<li><code>connection</code> : the new <code><a class="el" href="classtes_1_1Connection.html" title="Defines the interfaces for a client connection.">Connection</a></code> object.</li>
<li><code>user</code> : the <code>user</code> argument given here.</li>
</ul>
<p>Write only.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">callback</td><td>The callback function pointer. </td></tr>
    <tr><td class="paramname">user</td><td>A user pointer passed to the <code>callback</code> whenever it is invoked. </td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="classtes_1_1TcpConnectionMonitor.html#acac81595423a5b1862c46c4e66be168a">tes::TcpConnectionMonitor</a>.</p>

</div>
</div>
<a class="anchor" id="ad59be7d4f38eb75e23ebb026793e1391"></a><!-- doxytag: member="tes::ConnectionMonitor::setConnectionCallback" ref="ad59be7d4f38eb75e23ebb026793e1391" args="(const std::function&lt; void(Server &amp;, Connection &amp;)&gt; &amp;callback)=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void tes::ConnectionMonitor::setConnectionCallback </td>
          <td>(</td>
          <td class="paramtype">const std::function&lt; void(<a class="el" href="classtes_1_1Server.html">Server</a> &amp;, <a class="el" href="classtes_1_1Connection.html">Connection</a> &amp;)&gt; &amp;&#160;</td>
          <td class="paramname"><em>callback</em></td><td>)</td>
          <td><code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>An overload of <code><a class="el" href="classtes_1_1ConnectionMonitor.html#a6f90cafd07d22f404d324cbf2ac37c9e" title="Sets the callback invoked for each new connection.">setConnectionCallback()</a></code> using the C++11 <code>funtion</code> object. </p>
<p>Both methods are provided to cater for potential ABI issues.</p>
<p>No user argument is supported as the flexibility of <code>std::function</code> obviates the for such.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">callback</td><td>The function to invoke for each new connection. </td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="classtes_1_1TcpConnectionMonitor.html#ade5dfb31eaf8f666dff0322e2f0f6092">tes::TcpConnectionMonitor</a>.</p>

</div>
</div>
<a class="anchor" id="a114a20ff82fd77e7da537ea98f27d6d7"></a><!-- doxytag: member="tes::ConnectionMonitor::start" ref="a114a20ff82fd77e7da537ea98f27d6d7" args="(Mode mode)=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool tes::ConnectionMonitor::start </td>
          <td>(</td>
          <td class="paramtype">Mode&#160;</td>
          <td class="paramname"><em>mode</em></td><td>)</td>
          <td><code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Starts the monitor listening in the specified mode. </p>
<p>The listening thread is started if <code>mode</code> is <code>Asynchronous</code>. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">mode</td><td>The listening mode. Mode <code>Node</code> is ignored. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>True if listening is running in the specified <code>mode</code>. This includes both newly started and if it was already running in that mode. False is returned if <code>mode</code> is <code>None</code>, or differs from the running mode. </dd></dl>

<p>Implemented in <a class="el" href="classtes_1_1TcpConnectionMonitor.html#a57e146207a01efd9ba06a194d9809078">tes::TcpConnectionMonitor</a>.</p>

</div>
</div>
<a class="anchor" id="a55c032ddcac6b1ce37fae665fabfee07"></a><!-- doxytag: member="tes::ConnectionMonitor::stop" ref="a55c032ddcac6b1ce37fae665fabfee07" args="()=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void tes::ConnectionMonitor::stop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Stops listening for further connections. </p>
<p>This requests termination of the monitor thread if running.</p>
<p>Safe to call if not running. </p>

<p>Implemented in <a class="el" href="classtes_1_1TcpConnectionMonitor.html#a84bfae1f569e8af380a846632b556ccf">tes::TcpConnectionMonitor</a>.</p>

</div>
</div>
<a class="anchor" id="a6024a174700e90daa3ec24e324ae6c88"></a><!-- doxytag: member="tes::ConnectionMonitor::waitForConnection" ref="a6024a174700e90daa3ec24e324ae6c88" args="(unsigned timeoutMs)=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual int tes::ConnectionMonitor::waitForConnection </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>timeoutMs</em></td><td>)</td>
          <td><code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Wait up to <code>timeoutMs</code> milliseconds for a connection. </p>
<p>Returns immediately if we already have a connection. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">timeoutMs</td><td>The time out to wait in milliseconds. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The number of connections on returning. These may need to be committed. </dd></dl>

<p>Implemented in <a class="el" href="classtes_1_1TcpConnectionMonitor.html#ab781b00b72b8fc7882b82746d23c80a8">tes::TcpConnectionMonitor</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="3esconnectionmonitor_8h_source.html">3esconnectionmonitor.h</a></li>
</ul>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="namespacetes.html">tes</a>      </li>
      <li class="navelem"><a class="el" href="classtes_1_1ConnectionMonitor.html">ConnectionMonitor</a>      </li>
      <li class="footer">Generated by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


</body>
</html>
