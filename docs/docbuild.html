<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>3rd Eye Scene: Building 3rd Eye Scene</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">3rd Eye Scene</div>
   <div id="projectbrief">3rd Eye Scene documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('docbuild.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Building 3rd Eye Scene </div>  </div>
</div>
<div class="contents">
<div class="textblock"><p>Building all the 3<sup>rd</sup> Eye Scene components requires the following tools and libraries:</p>
<p>Dependency | For Components ------------------------------------------- | ----------------- Visual Studio or Xamarin Studio | C# core, server A C++11 compatible compiler | C++ core, server CMake | C++ Winsock2 | C++ Windows Berkley Sockets | C++ Linux, MacOS Unity 3D | Viewer</p>
<p>Visual Studio Community Edition and Unity Personal Edition are both sufficient for building.</p>
<p>The following components are optional:</p>
<p>Dependency | For Components ------------------------------------------- | ----------------- zlib (highly recommened) | C++ server doxygen | Documentation graphviz | Documentation</p>
<p>All of these components should be installed before building. On Windows CMake may not automatically locate zlib and using "cmake-gui" is recommended to help locate zlib for CMake before building.</p>
<h2><a class="anchor" id="docbuildcsharp"></a>
Building C# 3es Core</h2>
<p>Before building the 3esCore project, note that the 3esRuntime library depends on the UnityEngine libraries. The project file is set up to attempt to automatically locate UnityEngine.dll as follows:</p>
<ol type="1">
<li>Using /Applications/Unity/Unity.app/Contents/Managed/UnityEngine.dll if it exists (default MacOS install location).</li>
<li>Using "C:\Program Files\Unity\Editor\Data\Managed\UnityEngine.dll" if it exists (default Windows install location).</li>
<li>Using the environment variable UNITY_DLL_PATH.</li>
</ol>
<p>This will only work automatically when Unity is installed to the default location on either MacOS or Windows. Otherwise, UNITY_DLL_PATH must be set to the correct location first.</p>
<p>Simply open up 3esCore.sln and build. Note that the default build configuration is for "Any CPU" to support 64-bit code.</p>
<p><b>Important:</b> The 3esCore and 3esRuntime projects are configured to automatically output into the 3rdEyeScene Unity project Assets folder using a relative path. Specifically "../3rdEyeScene/Assets/plugins". This directly supports the 3<sup>rd</sup> Eye Scene viewer application. Both Debug and Release builds target this folder and will overwrite one another. Thus whatever was build last is used by Unity.</p>
<h2><a class="anchor" id="docbuildunity"></a>
Building Unity Viewer Client</h2>
<p>To build the viewer application:</p>
<ol type="1">
<li>Build the <a class="el" href="docbuild.html#docbuildcsharp">C# core</a>, preferably in "Release" mode.</li>
<li>Open Unity</li>
<li>Open the Unity project under the 3rdEyeScene directory.</li>
<li>Open the "3rdEyeScene.unity" scene.</li>
<li>Select "File-&gt;Build Settings"</li>
<li>Select the desired "Target Platform"</li>
<li>Select the x86_64 architecture if available</li>
<li>Click "Build" or "Build and Run" and choose the output directory</li>
</ol>
<p>You may now run the viewer application.</p>
<h3><a class="anchor" id="docbuildunitysupport"></a>
Supported Platforms</h3>
<p>Unity has very good cross platform support. However, the viewer application has only been tested on the following platforms. Other platforms may not work at all and may certainly have UI issues.</p>
<p>Supported platforms:</p>
<ul>
<li>Windows</li>
<li>MacOS</li>
</ul>
<h2><a class="anchor" id="docbuildcpp"></a>
Building C++ Server</h2>
<p>This section details how to build the C++ server libraries and include them in your code. There is also an option of including the 3es code into your own build tree.</p>
<ol type="1">
<li>Install the prerequisites listed above.</li>
<li>Open a command prompt or terminal window.</li>
<li>Change directories to the 3es cpp directory.</li>
<li>Create a "build" sub directory (may be named as you like)</li>
<li>Change into the build directory.</li>
<li>Run CMake to build the project files (see below)</li>
<li>Build using the generated files</li>
</ol>
<p>CMake supports many platforms and may need to be run differently in various build environments. The recommended ones are detailed below.</p>
<h3><a class="anchor" id="docbuildcppwindows"></a>
Windows CMake</h3>
<p>Under Windows, the recommended CMake command is: </p>
<div class="fragment"><pre class="fragment">
  cmake -G "Visual Studio 14 2015 Win64" ..
</pre></div><p>Note that the generator may be changed to a different version of Visual Studio (below VS12 is definitely not supported), but appending "Win64" is recommended to generate 64-bit code. Omit "Win64" if 32-bit code is required.</p>
<p>At this point, it is likely that zlib has not been located. To address this, run "cmake-gui .." and set the following variables (advanced mode may be required):</p>
<ul>
<li>ZLIB_INCLUDE_DIR: set to the directory containing "zlib.h"</li>
<li>ZLIB_LIBRARY_DEBUG: set to point to the debug version of the zlib library: "zlibd.lib" (optional)</li>
<li>ZLIB_LIBRARY_RELEASE: set to point to the release version of the zlib library: "zlib.lib" These steps can be omitted if compression is not required.</li>
</ul>
<p>After running CMake, open 3rd-eye-scene.sln (in the build directory) and build.</p>
<p>This generates a the core 3es C++ static libraries. These do nothing on their own and need to be incorporated into another application. To use them in your application, first build the "INSTALL" project in 3rd-eye-scene.sln. By default, this installs to C: Files\3rd-eye-scene, which may not be desirable and requires elevated priviledges to success (requires administrator mode). This can be changed using cmake-gui, setting the CMAKE_INSTALL_PREFIX to the desired installation location (recommended).</p>
<p>Next, ensure your library includes the installed header files and links against the installed static libraries. Finally, use the TES_ macros to execute 3es commands.</p>
<h3><a class="anchor" id="docbuildcppnix"></a>
Linux and MacOS CMake</h3>
<p>Under Linux and MacOS, the recommended CMake and build commands are: </p>
<div class="fragment"><pre class="fragment">
  cmake -DCMAKE_BUILD_TYPE=Release ..
  make
  make install
</pre></div><p>Next ensure your application includes and links the installed header and library files, then use TES_ macros to manage the 3es server.</p>
<h2><a class="anchor" id="docbuildintegratecpp"></a>
Integrating C++ Server Code Into Your Build Tree</h2>
<p>An alternative way of using the C++ code is to put the 3es-core and 3es-server code into your own build tree. There are several ways to do this, but the following section describes how to do so assuming you are also using CMake for your own build tree.</p>
<ol type="1">
<li>Copy the 3es-core and 3es-server code directories into your build tree (optionally in a sub-directory).</li>
<li>Copy the cmake directory (or just cmake/3es.cmake) into into the same directory. You should have three new directores all in the same parent directory: 3es-core, 3es-server and cmake.</li>
<li>Edit your project's CMakeLists.txt file to add <code>add_subdirectory(3es-core)</code> and <code>add_subdirectory(3es-server)</code>.</li>
<li>Include 3es server into your own executable or library using the CMake commands listed below.</li>
</ol>
<div class="fragment"><pre class="fragment"> {.cmake}
<span class="preprocessor">  # Before your add_library() or add_executable() command:</span>
<span class="preprocessor"></span>  get_target_property(TES_INCLUDE_DIRS 3es-server INCLUDE_DIRECTORIES)
  include_directories(<span class="stringliteral">&quot;${TES_INCLUDE_DIRS}&quot;</span>)
  
  <span class="preprocessor">#...</span>
<span class="preprocessor"></span>
<span class="preprocessor">  # After your add_library() or add_executable() command:</span>
<span class="preprocessor">  target_link_libraries(mylibrary 3es-server)</span>
</pre></div><p>Note: replace "mylibrary" with the name of your executable or library as passed to <code>add_library()</code> or <code>add_executable()</code>.</p>
<h2><a class="anchor" id="docbuildintegratecshard"></a>
Integrating C# Server Code</h2>
<p>To use the C# server library simply build the C# code, then add a reference to the C# 3esServer.dll in your project. Consul the Visual Studio or Xamarin Studio documentation for adding library references to C# projects for more information. </p>
</div></div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="main.html">3rd Eye Scene Documentation</a>      </li>
      <li class="footer">Generated by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


</body>
</html>
